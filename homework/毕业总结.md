# 毕业总结

## 学习总结

通过十几周的学习，本次课程的所有内容终于学习完毕，虽然很多知识点可能需要多次重复学习，很多实验也没有完全完成，但在这15周中依然学习到了不少东西。首先简单总结一下本次《云原生训练营》的知识内容，本次课程总体而言是围绕 kubernetes 来展开的，我愿意将其分为以下四个部分：

1. kubernetes 的前置知识。包括 go 语言的基础知识，docker 的基础知识与核心原理
2. kubernetes 基本架构与核心组件
3. kubernetes 的典型应用场景。包括生产化集群、作为运维手段、应用迁移等
4. 基于 kubernetes 的高级应用。serviceMesh 的思想，istio 知识和应用

以下详细说说我对这个四个部分的学习心得和感受

### 前置知识

在前置知识中，花了两周的时间来学习 go 语言，但明显对于一门语言来说，只能算入门。因为我是后端开发工程师，之前主要使用 Java 语言。也学习过一点点 go 语言，这两个模块整体而言，难度不算大。我认为在这两个模块的学习当中，应该着重了解 go 语言的特性，能编写基础的 go 程序即可，如果想要完整的学习 go 语言，或者使用 go 语言开发一个完整的项目，还需要其他方面的学习与训练。

前置知识中的第二个部分是 docker。实际上我在几年前工作中，就已经逐步的使用过 docker。但最初对于容器化技术的认识不够，认为 docker 是某种虚拟化技术，因为其使用上，确实就像使用虚拟机，但更轻量。后来也关注过一些 docker 的原理，发现容器技术确实是不同的，他所面临的问题也与之前大不相同。
通过一周的学习，巩固了我之前对于容器技术的理解，更重要的是，通过实验，让容器技术真正在我面前呈现出白盒的状态，虽然不敢说已经完全理解了 docker ，但对于容器技术的核心与原理已经有了更系统的认知

### 核心组件

第二个大的部分正式进入了 kubernetes 的学习。首先是通过对 Borg 架构的讲解，来了解 kubernetes 的基础架构知识，学习 Borg 的设计思想和解决的问题。基于 Borg，来学习 kubernetes 的基础架构和特点，了解其设计原则、核心对象，以及一些基本操作。

接下来就是对于 kubernetes 核心组件的逐步学习了：

- ETCD：一个键值存储组件。主要学习了其一致性协议 Raft 协议，etcd的一些机制。以及，动手搭建一个 etcd 的分布式集群，观察其数据的存储、监控、读取、历史等操作
- Api-Server：作为 kubernetes 重要的接口，其他模块必须通过它才能操作数据。这一模块，主要学习了 api server 是如何实现认证、准入、鉴权这些操作的，以及如何集成认证服务
- 调度器：学习了调度器的工作原理，调度策略，调度器对于资源调度的维度，以及一些实际的经验
- 控制器：主要学习了控制器的工作原理，一些通用的控制器，以及一些典型的控制器配置
- kubelet：学习了 kubelet 对于节点、node 的管理，着重学习 CRI  CNI  CSI 的知识
- kube-proxy：kube-proxy 的一些原理、规则等，以及 iptable、ipvs 的相关知识

最后还有基于 pod 的生命周期管理，和服务的操作，模块八最后的作业也是整个 pod 操作的一次良好实践。

总体而言，核心组件这块的东西很多，这几章学习下来也比较累，有很多新的知识需要理解和消化，算是本地课程的第一个大关。

### 典型应用

在这一部分中，首先的生产集群管理这一模块，对于我而言基本属于完全新的知识。虽然所讲的知识，我也能听懂，一些实操，诸如资源管理规划、故障处理、安全等也能基本理解，但可能因为我对于运维的工作不太熟悉，导致我对于这块的知识缺乏感性认识，以致于我在知识回顾时，对这块的知识感觉十分陌生。这块的知识要消化可能还需要比较长的时间去体会才行。

而生产化运维和应用迁移这两个模块，应该是我收获比较大的两个模块。因为我曾在架构组工作，解决过很多诸如 DevOps 的问题，关于如何实现自动化运维，开发一套相对好用的自动化运维平台是有一点经验的。而在自动化运维这一模块中，我之前在工作中的不少思考，或得到了印证，或得到了启发，感觉收获满满。另外，课程中介绍的新工具——tekton 和 argo CD，虽然我觉得大概率不会用到，但这两个工具的思路却十分值得参考。当然，自动化运维的系统化知识也极大的弥补了我对于这块知识的了解，比如在建立镜像仓库时，要如何处理镜像的安全、做镜像加速，如何去做 gitOps 等等。

在应用迁移的这个模块，主要讨论了如果把现有应用上云，这个问题恰好是我在架构组工作时时常思考，但一直没有考虑清楚的地方，课程中总结下来有：

1. 应用容器化。应用容器化需要考虑的问题，如何处理配置，如何负载，如何收集日志，如何处理开销，如何处理故障等等一系列问题
2. 应用迁移。应用迁移到 kubernetes 上，如何去规划资源，如何管理数据，如何实现高可用等。
3. 最后也是我觉得最有收获的，如何推动团队上云

基于以上，我们目前有一些手段来处理，比如通过 Metrics-Server 组件收集资源指标，通过横向或纵向的扩容缩容来实现资源的动态分配等等。

### ISTIO

最后几个模块主要是结合 istio 来学习一些 kubernetes 更高级的一些特性和应用。

模块十二中，主要学习了 Envoy 组件的原理，以及基于 istio 如何去做流量的管理。介绍了 istio 做流量管理的各种机制。模块十三主要讨论的是集群联邦，介绍了多集群治理的一些方案。模块十三则主要聚焦于安全，讨论了云原生下，如何思考安全问题，如何解决安全问题。学习了 ZTA——零信任架构。以及 istio 的认证、鉴权的原理和实现机制。

总体而言，这一部分的虽然中心明确，但知识点比较杂，主要在做的事情就是针对某个点，结合理论和实际来展开说明。对我而言，虽然能勉强跟上，但由于知识点比较杂，且很多点需要前面知识的支撑，以及运维知识的支撑，这一块学习的也是比较吃力的。

## 个人收获

经过本次课程的学习，个人的收获还是比较大的。总体而言，主要在以下几个方面：

1. 较为系统的学习了云原生的知识。虽然对于运维知识存在不足，知识消化的也一般，但总的来说还是系统的学习了 kubernetes 的相关知识，开阔了相关领域的眼界
2. 在本地搭建了一套 kubernetes，把课程中的大部分实操都操作了一遍，虽然有的操作因为各种原因有的没有成功。但整体而言从实操层面还是非常有收获的
3. 孟老师和助教老师的一些实际经验很有帮助。虽然很多问题还没有遇到，但相信在未来，课程中的一些实际案例还是非常具有参考价值的

当然，还有一些收获是很难去总结的。比如，虽然我以前学习过一点点 go 的知识，但本次课程的学习对 go 产生了更大的兴趣，在工作中也会尝试用 go 写一些小工具来使用。在写 go 的时候，又逐步学习了更多的 go 的相关知识；还有，我当前所在公司已经上了云，但对于 kubernetes 的很多使用我认为存在一些问题。虽然我还不能直接的去处理这些问题，但我已经可以从云原生的角度去思考怎样做可能更好。诸如这样的一些知识外的收获也是比较多的。

最后，虽然已经学完了所有课程，但离完全理解消化还有很长的一段距离。接下来，我需要首先完成课程中的所有实操，对于核心组件部分和典型应用部分需要多次学习。其实在写作本次总结时，翻看以往的 PPT，已经发现了以前有的点理解不到位，而有知识点又有了新的认识。所以对于那些理解不深刻，和比较重要的知识点还是需要反复回看的。另外，我也会尝试在实际工作中基于云原生的一些思路和技术，来解决一些实际问题。期待未来能有更大的收获！